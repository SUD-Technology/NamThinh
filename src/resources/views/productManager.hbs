{{!-- Body: start --}}
<div class="container">
    <div class="product-manager-header">
        <div class="row pagi">
            <span class="sub-title">Quản lý sản phẩm</span>
            <img class="bgc-title" src="/img/title.png" alt="">
        </div>
    </div>
    <div class="product-manager-body">

        <form action="" class="find-product-form">
            <div class="form-group">
                <div class="col-md-2">
                    <select class="form-control" id="product-lv1">
                        <option value="">-- Loại sản phẩm --</option>
                        <option value="1">LỐP ADVANCE/SAMSON</option>
                        <option value="2">XE TẢI/ ĐẦU KÉO / XE BEN</option>
                        <option value="3">PHỤ TÙNG Ô TÔ</option>
                        <option value="4">DẦU NHỚT</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select class="form-control" id="product-lv2">
                    </select>
                </div>
                <div class="col-md-2">
                    <select class="form-control" id="product-lv3">

                    </select>
                </div>
                <div class="col-md-2">
                    <select class="form-control" id="exampleFormControlSelect1">
                        <option value="">Xuất xứ</option>
                        {{#each origins}}
                        <option value="{{this}}">{{this}}</option>
                        {{/each}}
                    </select>
                </div>
                <div class="col-md-2">
                    <select class="form-control" id="exampleFormControlSelect1">
                        <option value="">Thương hiệu</option>
                        {{#each brands}}
                        <option value="{{this}}">{{this}}</option>
                        {{/each}}
                    </select>
                </div>
                <div class="col-md-2">
                    <button class="form-control">Tìm kiếm</button>
                </div>
            </div>
        </form>

        <nav aria-label="Page navigation example">
            <ul class="pagination">
                {{!-- Previous Page: start --}}
                {{#if (isFirstPage current)}}
                <li class="page-item disabled">
                    <a class="page-link" href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                {{else}}
                <li class="page-item">
                    <a class="page-link" href="/admin/product-manager/{{previous}}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                {{/if}}
                {{!-- Item: start --}}
                {{#pagination current pages}}
                {{/pagination}}
                {{!-- Next Page: start --}}
                {{#if (isLastPage current pages)}}
                <li class="page-item disabled">
                    <a class="page-link" href="#" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
                {{else}}
                <li class="page-item">
                    <a class="page-link" href="/admin/product-manager/{{next}}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
                {{/if}}
            </ul>
        </nav>

        <table class="table table-hover table-bordered table-product">
            <thead>
                <tr>
                    <th scope="col">STT</th>
                    <th scope="col">Ảnh</th>
                    <th scope="col">Tên hàng hóa</th>
                    <th scope="col">Model</th>
                    <th scope="col">Mã</th>
                    <th scope="col">Giá</th>
                    <th scope="col">Tồn</th>
                </tr>
            </thead>`
            <tbody>
                {{#each products}}
                <tr>
                    <th scope="row"></th>
                    <td>
                        {{#if pimg}}
                        <img src="https://storage.googleapis.com/namthinh-69ec0.appspot.com/{{pimg}}" alt="">
                        {{/if}}
                    </td>
                    <td><a href="/products/{{pslug}}">{{pname}}</a></td>
                    <td>{{model}}</td>
                    <td>{{pid}}</td>
                    <td>{{price}}</td>
                    <td>{{amount}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
        <ul class="pagination">
            {{!-- Previous Page: start --}}
            {{#if (isFirstPage current)}}
            <li class="page-item disabled">
                <a class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </a>
            </li>
            {{else}}
            <li class="page-item">
                <a class="page-link" href="/admin/product-manager/{{previous}}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </a>
            </li>
            {{/if}}
            {{!-- Item: start --}}
            {{#pagination current pages}}
            {{/pagination}}
            {{!-- Next Page: start --}}
            {{#if (isLastPage current pages)}}
            <li class="page-item disabled">
                <a class="page-link" href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                </a>
            </li>
            {{else}}
            <li class="page-item">
                <a class="page-link" href="/admin/product-manager/{{next}}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                </a>
            </li>
            {{/if}}
        </ul>
    </div>

</div>
{{!-- Body: end --}}


<script>
    const stt = document.querySelectorAll('.table-product tbody th')
    stt.forEach((item, index) => {
        item.innerHTML = `${index + 1}`
    })

    //
    $('#product-lv1').change(function () {
        var $option = $(this).find('option:selected')
        if ($option.val() == '') {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn danh mục sản phẩm --`).attr('value', ``))
            $('#product-lv3').empty()
            $('#product-lv3').append($('<option></option>').text(`-- Chọn danh mục sản phẩm --`).attr('value', ``))
        } else if ($option.val() == 1) {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
            $('#product-lv2').append($('<option></option>').text(`Lốp công trình`).attr('value', `1`))
            $('#product-lv2').append($('<option></option>').text(`Lốp công nghiệp`).attr('value', `2`))
            $('#product-lv2').append($('<option></option>').text(`Lốp nông nghiệp`).attr('value', `3`))
        } else if ($option.val() == 2) {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn loại xe --`).attr('value', ``))
            $('#product-lv2').append($('<option></option>').text(`Xe tải thùng`).attr('value', `1`))
            $('#product-lv2').append($('<option></option>').text(`Xe Đầu kéo`).attr('value', `2`))
            $('#product-lv2').append($('<option></option>').text(`Xe ben`).attr('value', `3`))
            $('#product-lv2').append($('<option></option>').text(`Sơ mi rơ móc`).attr('value', `4`))
        } else if ($option.val() == 3) {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn loại phụ tùng --`).attr('value', ``))
            $('#product-lv2').append($('<option></option>').text(`Xe tải thùng`).attr('value', `1`))
            $('#product-lv2').append($('<option></option>').text(`Xe Đầu kéo`).attr('value', `2`))
            $('#product-lv2').append($('<option></option>').text(`Xe ben`).attr('value', `3`))
            $('#product-lv2').append($('<option></option>').text(`Sơ mi rơ móc`).attr('value', `4`))
        } else if ($option.val() == 4) {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn loại dầu nhớt --`).attr('value', ``))
            $('#product-lv2').append($('<option></option>').text(`Dầu nhớt ô tô / xe máy`).attr('value', `1`))
            $('#product-lv2').append($('<option></option>').text(`Dầu nhớt công nghiệp`).attr('value', `2`))
        }
    });

    $('#product-lv2').change(function () {
        var $option = $(this).find('option:selected')
        var level1 = $('#product-lv1').find('option:selected').val()

        if ($option.val() == '') {
            $('#product-lv3').empty()
            $('#product-lv3').append($('<option></option>').text(`-- Chọn danh mục sản phẩm --`).attr('value', ``))
        } else if (level1 == 1) {
            if ($option.val() == 0) {
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
            }
            if ($option.val() == 1) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Lốp xe tải hạng nặng`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Lốp xe máy xúc`).attr('value', `2`))
                $('#product-lv3').append($('<option></option>').text(`Lốp xe cẩu`).attr('value', `3`))
                $('#product-lv3').append($('<option></option>').text(`Lốp xe lu`).attr('value', `4`))
            } else if ($option.val() == 2) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Lốp đặc`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Lốp công nghiệp khí nén`).attr('value', `2`))
            } else if ($option.val() == 3) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Lốp nông nghiệp nhỏ`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Lốp nông nghiệp lớn`).attr('value', `2`))
            }
        } else if (level1 == 2) {
            if ($option.val() == 0) {
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại xe --`).attr('value', ``))
            }
        } else if (level1 == 3) {
            if ($option.val() == 0) {
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại phụ tùng --`).attr('value', ``))
            }
        } else if (level1 == 4) {
            if ($option.val() == 0) {
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại dầu nhớt --`).attr('value', ``))
            } else if ($option.val() == 1) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại dầu nhớt --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Dầu động cơ`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Dầu hợp số`).attr('value', `2`))
                $('#product-lv3').append($('<option></option>').text(`Dầu láp`).attr('value', `3`))
            } else if ($option.val() == 2) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại dầu nhớt --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Dầu đa năng`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Dầu bôi trơn`).attr('value', `2`))
                $('#product-lv3').append($('<option></option>').text(`Dầu thủy lực`).attr('value', `3`))
            }
        }
    })

</script>