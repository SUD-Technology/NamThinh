{{!-- Body: start --}}
<div class="container">
    <div class="product-manager-header">
        <div class="row pagi">
            <span class="sub-title">Quản lý sản phẩm</span>
            <img class="bgc-title" src="/img/title.png" alt="">
        </div>
    </div>
    <div class="product-manager-body">

        <form action="/admin/product-manager/" class="find-product-form">
            <div class="form-group">
                <div class="row">
                    <div class="col-md-6 mb-2">
                        <input type="text" placeholder="Tên sản phẩm" name="product_name" class="form-control">
                    </div>
                    {{!-- <div class="col-md-2 mb-2">
                        <select id="product_categories" name="product_categories" required="" class="form-control">
                            <option value="">Chọn loại sản phẩm</option>
                            <optgroup label="Lốp Advance / Samson">
                                <option value="111">Lốp xe tải / xe khách: Lốp tải nhẹ</option>
                                <option value="112">Lốp xe tải / xe khách: Lốp tải nặng</option>
                                <option value="113">Lốp xe tải / xe khách: Lốp xe khách / xe bus</option>

                                <option value="121">Lốp máy công trình: Lốp xe tải hạng nặng</option>
                                <option value="122">Lốp máy công trình: Lốp máy súc</option>
                                <option value="123">Lốp máy công trình: Lốp xe cẩu</option>
                                <option value="124">Lốp máy công trình: Lốp xe lu</option>

                                <option value="131">Lốp máy công nghiệp: Lốp đặc</option>
                                <option value="132">Lốp máy công nghiệp: Lốp công nghiệp khí nén</option>

                                <option value="141">Lốp máy nông nghiệp: Lốp nông nghiệp nhỏ</option>
                                <option value="142">Lốp máy nông nghiệp: Lốp nông nghiệp lớn</option>
                            </optgroup>
                            <optgroup label="Xe tải / Đầu kéo / Xe ben">
                                <option value="210">Xe tải thùng</option>
                                <option value="220">Xe đầu kéo</option>
                                <option value="230">Xe ben</option>
                                <option value="240">Sơ mi rơ móc</option>
                            </optgroup>
                            <optgroup label="Phụ tùng ô tô">
                                <option value="310">Xe tải thùng</option>
                                <option value="320">Xe đầu kéo</option>
                                <option value="330">Xe ben</option>
                                <option value="340">Sơ mi rơ móc</option>
                            </optgroup>
                            <optgroup label="Dầu nhớt">
                                <option value="411">Dầu nhớt ô tô / xe máy: Dầu động cơ</option>
                                <option value="412">Dầu nhớt ô tô / xe máy: Dầu hộp số</option>
                                <option value="413">Dầu nhớt ô tô / xe máy: Dầu láp</option>
                                <option value="421">Dầu nhớt công nghiêp: Dầu đa năng</option>
                                <option value="422">Dầu nhớt công nghiêp: Dầu bôi trơn</option>
                                <option value="423">Dầu nhớt công nghiêp: Dầu thủy lực</option>
                            </optgroup>
                        </select>
                    </div> --}}
                    <div class="col-md-2 mb-2">
                        <select name="lv1" class="form-control" id="product-lv1">
                            <option value="">-- Loại sản phẩm --</option>
                            <option value="1">LỐP ADVANCE/SAMSON</option>
                            <option value="2">XE TẢI/ ĐẦU KÉO / XE BEN</option>
                            <option value="3">PHỤ TÙNG Ô TÔ</option>
                            <option value="4">DẦU NHỚT</option>
                        </select>
                    </div>
                    <div class="col-md-2 mb-2">
                        <select name="lv2" class="form-control" id="product-lv2">
                        </select>
                    </div>
                    <div class="col-md-2 mb-2">
                        <select name="lv3" class="form-control" id="product-lv3">
                        </select>
                    </div>
                    <div class="col-md-2 mb-2">
                        <select name="origin" class="form-control" id="exampleFormControlSelect1">
                            <option value="">Xuất xứ</option>
                            {{#each origins}}
                            <option value="{{this}}">{{this}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <div class="col-md-2 mb-2">
                        <select name="brand" class="form-control" id="exampleFormControlSelect1">
                            <option value="">Thương hiệu</option>
                            {{#each brands}}
                            <option value="{{this}}">{{this}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <div class="col-md-2 mb-2">
                        <button class="form-control">Tìm kiếm</button>
                    </div>
                </div>
            </div>
        </form>

        <nav aria-label="Page navigation example">
            <ul class="pagination">
                {{!-- Previous Page: start --}}
                {{#if (isFirstPage current)}}
                <li class="page-item disabled">
                    <a class="page-link" href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                {{else}}
                <li class="page-item">
                    <a class="page-link"
                        href="/admin/product-manager/?page={{previous}}?lv1={{lv1}}?lv2={{lv2}}?lv3={{lv3}}?brand={{brand}}?origin={{origin}}?name={{name}}"
                        aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                {{/if}}
                {{!-- Item: start --}}
                {{#pagination current pages lv1=lv1 lv2=lv2 lv3=lv3 brand=brand origin=origin product_name=product_name}}
                {{/pagination}}
                {{!-- Next Page: start --}}
                {{#if (isLastPage current pages)}}
                <li class="page-item disabled">
                    <a class="page-link" href="#" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
                {{else}}
                <li class="page-item">
                    <a class="page-link"
                        href="/admin/product-manager/?page={{next}}?lv1={{lv1}}?lv2={{lv2}}?lv3={{lv3}}?brand={{brand}}?origin={{origin}}?name={{name}}"
                        aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
                {{/if}}
            </ul>
        </nav>

        <table class="table table-hover table-bordered table-product">
            <thead>
                <tr>
                    <th scope="col">STT</th>
                    <th scope="col">Ảnh</th>
                    <th scope="col">Tên hàng hóa</th>
                    <th scope="col">Model</th>
                    <th scope="col">Mã</th>
                    <th scope="col">Giá</th>
                    <th scope="col">Tồn</th>
                </tr>
            </thead>`
            <tbody>
                {{#if products}}
                {{#each products}}
                <tr>
                    <th scope="row"></th>
                    <td>
                        {{#if pimg}}
                        <img src="https://storage.googleapis.com/namthinh-69ec0.appspot.com/{{pimg}}" alt="">
                        {{/if}}
                    </td>
                    <td><a href="/products/{{pslug}}">{{pname}}</a></td>
                    <td>{{model}}</td>
                    <td>{{pid}}</td>
                    <td>{{price}}</td>
                    <td>{{amount}}</td>
                </tr>
                {{/each}}
                {{else}}
                <tr>
                    <td colspan="7">Không tìm thấy sản phẩm</td>
                </tr>
                {{/if}}
            </tbody>
        </table>
        <ul class="pagination">
            {{!-- Previous Page: start --}}
            {{#if (isFirstPage current)}}
            <li class="page-item disabled">
                <a class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </a>
            </li>
            {{else}}
            <li class="page-item">
                <a class="page-link"
                    href="/admin/product-manager/?page={{previous}}?lv1={{lv1}}?lv2={{lv2}}?lv3={{lv3}}?brand={{brand}}?origin={{origin}}?name={{name}}"
                    aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </a>
            </li>
            {{/if}}
            {{!-- Item: start --}}
            {{#pagination current pages lv1=lv1 lv2=lv2 lv3=lv3 brand=brand origin=origin product_name=product_name}}
            {{/pagination}}
            {{!-- Next Page: start --}}
            {{#if (isLastPage current pages)}}
            <li class="page-item disabled">
                <a class="page-link" href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                </a>
            </li>
            {{else}}
            <li class="page-item">
                <a class="page-link"
                    href="/admin/product-manager/?page={{next}}?lv1={{lv1}}?lv2={{lv2}}?lv3={{lv3}}?brand={{brand}}?origin={{origin}}?name={{name}}"
                    aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                </a>
            </li>
            {{/if}}
        </ul>
    </div>

</div>
{{!-- Body: end --}}


<script>
    const stt = document.querySelectorAll('.table-product tbody th')
    stt.forEach((item, index) => {
        item.innerHTML = `${index + 1}`
    })

    //
    $('#product-lv1').change(function () {
        var $option = $(this).find('option:selected')
        if ($option.val() == '') {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn danh mục sản phẩm --`).attr('value', ``))
            $('#product-lv3').empty()
            $('#product-lv3').append($('<option></option>').text(`-- Chọn danh mục sản phẩm --`).attr('value', ``))
        } else if ($option.val() == 1) {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
            $('#product-lv2').append($('<option></option>').text(`Lốp công trình`).attr('value', `1`))
            $('#product-lv2').append($('<option></option>').text(`Lốp công nghiệp`).attr('value', `2`))
            $('#product-lv2').append($('<option></option>').text(`Lốp nông nghiệp`).attr('value', `3`))
        } else if ($option.val() == 2) {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn loại xe --`).attr('value', ``))
            $('#product-lv2').append($('<option></option>').text(`Xe tải thùng`).attr('value', `1`))
            $('#product-lv2').append($('<option></option>').text(`Xe Đầu kéo`).attr('value', `2`))
            $('#product-lv2').append($('<option></option>').text(`Xe ben`).attr('value', `3`))
            $('#product-lv2').append($('<option></option>').text(`Sơ mi rơ móc`).attr('value', `4`))
        } else if ($option.val() == 3) {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn loại phụ tùng --`).attr('value', ``))
            $('#product-lv2').append($('<option></option>').text(`Xe tải thùng`).attr('value', `1`))
            $('#product-lv2').append($('<option></option>').text(`Xe Đầu kéo`).attr('value', `2`))
            $('#product-lv2').append($('<option></option>').text(`Xe ben`).attr('value', `3`))
            $('#product-lv2').append($('<option></option>').text(`Sơ mi rơ móc`).attr('value', `4`))
        } else if ($option.val() == 4) {
            $('#product-lv2').empty()
            $('#product-lv2').append($('<option></option>').text(`-- Chọn loại dầu nhớt --`).attr('value', ``))
            $('#product-lv2').append($('<option></option>').text(`Dầu nhớt ô tô / xe máy`).attr('value', `1`))
            $('#product-lv2').append($('<option></option>').text(`Dầu nhớt công nghiệp`).attr('value', `2`))
        }
    });

    $('#product-lv2').change(function () {
        var $option = $(this).find('option:selected')
        var level1 = $('#product-lv1').find('option:selected').val()

        if ($option.val() == '') {
            $('#product-lv3').empty()
            $('#product-lv3').append($('<option></option>').text(`-- Chọn danh mục sản phẩm --`).attr('value', ``))
        } else if (level1 == 1) {
            if ($option.val() == 0) {
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
            }
            if ($option.val() == 1) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Lốp xe tải hạng nặng`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Lốp xe máy xúc`).attr('value', `2`))
                $('#product-lv3').append($('<option></option>').text(`Lốp xe cẩu`).attr('value', `3`))
                $('#product-lv3').append($('<option></option>').text(`Lốp xe lu`).attr('value', `4`))
            } else if ($option.val() == 2) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Lốp đặc`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Lốp công nghiệp khí nén`).attr('value', `2`))
            } else if ($option.val() == 3) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại lốp --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Lốp nông nghiệp nhỏ`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Lốp nông nghiệp lớn`).attr('value', `2`))
            }
        } else if (level1 == 2) {
            if ($option.val() == 0) {
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại xe --`).attr('value', ``))
            }
        } else if (level1 == 3) {
            if ($option.val() == 0) {
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại phụ tùng --`).attr('value', ``))
            }
        } else if (level1 == 4) {
            if ($option.val() == 0) {
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại dầu nhớt --`).attr('value', ``))
            } else if ($option.val() == 1) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại dầu nhớt --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Dầu động cơ`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Dầu hợp số`).attr('value', `2`))
                $('#product-lv3').append($('<option></option>').text(`Dầu láp`).attr('value', `3`))
            } else if ($option.val() == 2) {
                $('#product-lv3').empty()
                $('#product-lv3').append($('<option></option>').text(`-- Chọn loại dầu nhớt --`).attr('value', ``))
                $('#product-lv3').append($('<option></option>').text(`Dầu đa năng`).attr('value', `1`))
                $('#product-lv3').append($('<option></option>').text(`Dầu bôi trơn`).attr('value', `2`))
                $('#product-lv3').append($('<option></option>').text(`Dầu thủy lực`).attr('value', `3`))
            }
        }
    })



</script>